(function(e){function t(t){for(var o,s,a=t[0],l=t[1],u=t[2],d=0,m=[];d<a.length;d++)s=a[d],Object.prototype.hasOwnProperty.call(n,s)&&n[s]&&m.push(n[s][0]),n[s]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(e[o]=l[o]);c&&c(t);while(m.length)m.shift()();return i.push.apply(i,u||[]),r()}function r(){for(var e,t=0;t<i.length;t++){for(var r=i[t],o=!0,a=1;a<r.length;a++){var l=r[a];0!==n[l]&&(o=!1)}o&&(i.splice(t--,1),e=s(s.s=r[0]))}return e}var o={},n={login:0},i=[];function s(t){if(o[t])return o[t].exports;var r=o[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=e,s.c=o,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)s.d(r,o,function(t){return e[t]}.bind(null,o));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],l=a.push.bind(a);a.push=t,a=a.slice();for(var u=0;u<a.length;u++)t(a[u]);var c=l;i.push([1,"chunk-vendors"]),r()})({1:function(e,t,r){e.exports=r("9eec")},4070:function(e,t,r){},4430:function(e,t,r){"use strict";var o,n,i="/api",s="/login.html",a="/index.html",l={login_location:s,index_location:a,host:i},u=l,c=r("2877"),d=Object(c["a"])(u,o,n,!1,null,null,null);t["a"]=d.exports},"55de":function(e,t,r){},"59f4":function(e,t,r){},"5b03":function(e,t,r){},"64f6":function(e,t,r){"use strict";r("59f4")},"653a":function(e,t,r){"use strict";r("4070")},8545:function(e,t,r){"use strict";r("5b03")},"9c95":function(e,t,r){"use strict";r("55de")},"9eec":function(e,t,r){"use strict";r.r(t);r("cadf"),r("551c"),r("f751"),r("097d");var o=r("2b0e"),n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container",attrs:{id:"box"}},[r("div",{attrs:{id:"main"}},[r("router-view")],1)])},i=[],s={},a=s,l=(r("64f6"),r("653a"),r("2877")),u=Object(l["a"])(a,n,i,!1,null,"713a2d2f",null),c=u.exports,d=r("8c4f"),m=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"login"}},[r("div",{staticClass:"title"},[e._v("学生选课系统 | LOGIN")]),r("hr"),r("el-form",{ref:"loginForm",attrs:{model:e.loginForm,rules:e.rules,"label-width":"50px","label-position":"left"}},[r("el-form-item",{attrs:{label:"账号",prop:"account"}},[r("el-input",{model:{value:e.loginForm.account,callback:function(t){e.$set(e.loginForm,"account",t)},expression:"loginForm.account"}})],1),r("el-form-item",{attrs:{label:"密码",prop:"password"}},[r("el-input",{attrs:{type:"password"},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}})],1),r("el-form-item",{attrs:{label:"身份"}},[r("el-radio-group",{attrs:{size:"medium"},model:{value:e.loginForm.identity,callback:function(t){e.$set(e.loginForm,"identity",t)},expression:"loginForm.identity"}},[r("el-radio",{attrs:{border:"",label:"学生"}}),r("el-radio",{attrs:{border:"",label:"教师"}}),r("el-radio",{attrs:{border:"",label:"管理员"}})],1)],1),r("el-checkbox",{staticClass:"rememberPwd",model:{value:e.rememberPwd,callback:function(t){e.rememberPwd=t},expression:"rememberPwd"}},[e._v("记住密码")]),r("el-form-item",{staticClass:"btn_box"},[r("el-button",{attrs:{type:"primary"},on:{click:e.loginClick}},[e._v("登 录")]),r("el-button",{attrs:{type:"success"},on:{click:function(t){return e.$router.push("/register")}}},[e._v("注 册")])],1)],1)],1)},f=[];r("28a5");document.title="学生选课系统|登录";var g={data:function(){return{loginForm:{account:"",password:"",identity:""},rules:{account:[{required:!0,message:"请输入账号",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},rememberPwd:!0}},methods:{loginClick:function(){var e=this,t={account:this.loginForm.account,password:this.loginForm.password},r=this.$qs.stringify(t);this.$refs.loginForm.validate((function(t){if(!t)return!1;e.axios.post(e.identityCtoE(e.loginForm.identity)+"/login",r).then((function(t){if(console.log(t.data.code),200==t.data.code){e.$message({showClose:!0,message:"登陆成功,正在跳转...",type:"success"}),e.rememberPwd?(e.setCookie("account",e.loginForm.account),e.setCookie("password",e.loginForm.password)):(e.setCookie("account",""),e.setCookie("password","")),sessionStorage.setItem("token",t.data.message);var r={id:e.loginForm.account,identity:e.identityCtoE(e.loginForm.identity),name:""};sessionStorage.setItem("state",JSON.stringify(r)),setTimeout((function(){window.location.href=e.COMMON.index_location}),1e3)}else e.$message({showClose:!0,message:"账号或密码错误!",type:"error"})})).catch((function(){e.$message({showClose:!0,message:"服务器连接失败"})}))}))},setCookie:function(e,t){var r=e+"="+t+"; ";console.log("cooke:",r),document.cookie=r},getCookie:function(e){for(var t=e+"=",r=document.cookie.split(";"),o=0;o<r.length;o++){var n=r[o].trim();if(0==n.indexOf(t))return n.substring(t.length,n.length)}return""},identityCtoE:function(e){switch(e){case"学生":return"student";case"教师":return"teacher";case"管理员":return"admin"}}},mounted:function(){this.loginForm.account=this.getCookie("account"),this.loginForm.password=this.getCookie("password")}},p=g,b=(r("9c95"),Object(l["a"])(p,m,f,!1,null,"55349caf",null)),S=b.exports,h=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"register"}},[r("div",{staticClass:"title"},[e._v("学生选课系统 | REGISTER")]),r("hr"),r("el-form",{ref:"registerForm",attrs:{model:e.registerForm,rules:e.rules,"label-width":"80px","label-position":"left"}},[r("el-form-item",{attrs:{label:"学号",prop:"Sid"}},[r("el-input",{model:{value:e.registerForm.Sid,callback:function(t){e.$set(e.registerForm,"Sid",t)},expression:"registerForm.Sid"}})],1),r("el-form-item",{attrs:{label:"姓名",prop:"Sname"}},[r("el-input",{model:{value:e.registerForm.Sname,callback:function(t){e.$set(e.registerForm,"Sname",t)},expression:"registerForm.Sname"}})],1),r("el-form-item",{attrs:{label:"身份证号",prop:"Sidcard"}},[r("el-input",{model:{value:e.registerForm.Sidcard,callback:function(t){e.$set(e.registerForm,"Sidcard",t)},expression:"registerForm.Sidcard"}})],1),r("el-form-item",{attrs:{label:"性别",prop:"Ssex"}},[r("el-radio-group",{model:{value:e.registerForm.Ssex,callback:function(t){e.$set(e.registerForm,"Ssex",t)},expression:"registerForm.Ssex"}},[r("el-radio",{attrs:{label:"男"}}),r("el-radio",{attrs:{label:"女"}})],1)],1),r("el-form-item",{attrs:{label:"密码",prop:"Spassword"}},[r("el-input",{attrs:{type:"password"},model:{value:e.registerForm.Spassword,callback:function(t){e.$set(e.registerForm,"Spassword",t)},expression:"registerForm.Spassword"}})],1),r("el-form-item",{attrs:{label:"重复密码",prop:"Spassword2",required:""}},[r("el-input",{attrs:{type:"password"},model:{value:e.registerForm.Spassword2,callback:function(t){e.$set(e.registerForm,"Spassword2",t)},expression:"registerForm.Spassword2"}})],1),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"选择学院",prop:"Sinstitution"}},[r("el-select",{staticStyle:{width:"95%"},attrs:{placeholder:"请选择学院"},model:{value:e.registerForm.Sinstitution,callback:function(t){e.$set(e.registerForm,"Sinstitution",t)},expression:"registerForm.Sinstitution"}},e._l(e.Sinstitution,(function(e){return r("el-option",{key:e.id,attrs:{label:e,value:e}})})),1)],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"入学时间",prop:"Sgrade"}},[r("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"year",placeholder:"选择年","value-format":"yyyy"},model:{value:e.registerForm.Sgrade,callback:function(t){e.$set(e.registerForm,"Sgrade",t)},expression:"registerForm.Sgrade"}})],1)],1)],1),r("el-form-item",{staticClass:"btn_box"},[r("el-button",{attrs:{type:"primary"},on:{click:e.registerClick}},[e._v("注 册")]),r("el-button",{attrs:{type:"info"},on:{click:function(t){return e.$router.push("/login")}}},[e._v("返回登录")])],1)],1)],1)},v=[];r("ac4d"),r("8a81"),r("5df3"),r("1c4c"),r("7f7f"),r("6b54");function y(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=w(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var o=0,n=function(){};return{s:n,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,a=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){a=!0,i=e},f:function(){try{s||null==r.return||r.return()}finally{if(a)throw i}}}}function w(e,t){if(e){if("string"===typeof e)return F(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?F(e,t):void 0}}function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=new Array(t);r<t;r++)o[r]=e[r];return o}var x={data:function(){var e=this,t=function(t,r,o){""===r?o(new Error("请再次输入密码")):r!==e.registerForm.Spassword?o(new Error("两次输入密码不一致!")):o()};return{registerForm:{Sid:"",Sname:"",Sidcard:"",Ssex:"",Spassword:"",Spassword2:"",Sinstitution:"",Sgrade:"",Smodtime:null},rules:{Sid:[{required:!0,message:"请输入账号",trigger:"blur"}],Sname:[{required:!0,message:"请输入用户名",trigger:"blur"}],Ssex:[{required:!0,message:"请输入性别",trigger:"blur"}],Sidcard:[{required:!0,message:"请输入身份证号",trigger:"blur"}],Spassword:[{required:!0,message:"请输入密码",trigger:"blur"}],Spassword2:[{validator:t,trigger:["blur","change"]}],Sinstitution:[{required:!0,message:"请选择学院",trigger:["blur","change"]}],Sgrade:[{required:!0,message:"请选择入学时间",trigger:["blur","change"]}]},Sinstitution:[]}},methods:{registerClick:function(){var e=this;this.$refs.registerForm.validate((function(t){if(!t)return!1;var r={Sid:e.registerForm.Sid,Spassword:e.registerForm.Spassword,Sname:e.registerForm.Sname,Ssex:e.registerForm.Ssex,Sidcard:e.registerForm.Sidcard,faculty:e.registerForm.Sinstitution,Sgrade:e.registerForm.Sgrade,Smodtime:new Date};console.log(r),e.axios.post("student/register?Sid="+e.registerForm.Sid+"&Spassword="+e.registerForm.Spassword+"&Sname="+e.registerForm.Sname+"&Ssex="+e.registerForm.Ssex+"&Sidcard="+e.registerForm.Sidcard+"&Sgrade="+e.registerForm.Sgrade+"&Sinstitution="+e.registerForm.Sinstitution).then((function(t){console.log(t.data),200==t.data.code?(e.$message({showClose:!0,message:"注册成功，请登录",type:"success"}),e.$router.push("/login")):e.$message({showClose:!0,message:"该学号已被占用，注册失败",type:"error"})})).catch((function(){e.$message({showClose:!0,message:"无法连接服务器"})}))}))}},mounted:function(){var e=this;this.axios.get("queryFaculity").then((function(t){var r,o=y(t.data.data);try{for(o.s();!(r=o.n()).done;){var n=r.value;e.Sinstitution.push(n.fname)}}catch(i){o.e(i)}finally{o.f()}})).catch((function(){e.$message({showClose:!0,message:"无法获取学院信息，请检查接口是否正常！",type:"error"})}))}},k=x,C=(r("8545"),Object(l["a"])(k,h,v,!1,null,"1258734b",null)),$=C.exports;o["default"].use(d["a"]);var _=new d["a"]({routes:[{path:"/",redirect:"/login"},{path:"/login",name:"login",component:S},{path:"/register",name:"register",component:$}]}),O=_,j=r("bc3a"),q=r.n(j),P=r("a7fe"),E=r.n(P),M=r("4430"),I=(r("826b"),r("450d"),r("c263")),A=r.n(I),T=(r("560b"),r("dcdc")),N=r.n(T),J=(r("b5d8"),r("f494")),R=r.n(J),G=(r("f4f9"),r("c2cc")),L=r.n(G),U=(r("7a0f"),r("0f6c")),z=r.n(U),D=(r("6611"),r("e772")),B=r.n(D),H=(r("1f1a"),r("4e4b")),K=r.n(H),Q=(r("fe07"),r("6ac5")),V=r.n(Q),W=(r("425f"),r("4105")),X=r.n(W),Y=(r("eca7"),r("3787")),Z=r.n(Y),ee=(r("10cb"),r("f3ad")),te=r.n(ee),re=(r("1951"),r("eedf")),oe=r.n(re),ne=(r("0fb7"),r("f529")),ie=r.n(ne);r("0fae");ie.a.install=function(e){e.prototype.$message=ie.a},o["default"].use(oe.a),o["default"].use(te.a),o["default"].use(Z.a),o["default"].use(X.a),o["default"].use(V.a),o["default"].use(K.a),o["default"].use(B.a),o["default"].use(z.a),o["default"].use(L.a),o["default"].use(ie.a),o["default"].use(R.a),o["default"].use(N.a),o["default"].use(A.a);var se=r("4328"),ae=r.n(se);o["default"].prototype.COMMON=M["a"],o["default"].prototype.$qs=ae.a,o["default"].use(E.a,q.a),q.a.defaults.baseURL=M["a"].host,new o["default"]({router:O,render:function(e){return e(c)}}).$mount("#app"),o["default"].config.productionTip=!1}});
//# sourceMappingURL=login.f9adc1e1.js.map